{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#sample","title":"Sample","text":"<p>One more, finally. Or not? :)</p> <p>Now:</p> <pre><code>$ some \n</code></pre> <p>Look what she said:</p> <p>This is it!</p>"},{"location":"#subtitle","title":"Subtitle","text":"<p>And now this:</p> <ul> <li>One</li> <li>Two</li> <li>Three</li> </ul>"},{"location":"#as-well","title":"As well","text":""},{"location":"#as-this","title":"As this","text":""},{"location":"#another","title":"Another","text":"<p>a link</p> <p>More?</p> <p>Can we now have <code>the build</code>?</p> <p>NOW!</p> <p>Not gonna work, is it?</p>"},{"location":"GSD/","title":"Get Security Done (GSD) - Microsoft Security &amp; M365 Defender","text":"<p>Quick wins to improve Security using existing M365 E5 entitlements</p> <p>!!! Note     Ideally this page will be highlighting how to get the best out of both your M365 E5 security and compliance entitlements. What is the best way to step lightly thru this and gain maximum benefit for the least effort? Most of the focus here is more on the M365 SaaS Security platform elements, not necessarily on Sentinel or Azure, but there will be plenty of crossover.</p> <p></p>"},{"location":"GSD/#core-reference-material","title":"Core reference material:","text":"<ul> <li>Microsoft Cybersecurity Reference Architecture -- https://aka.ms/MCRA</li> <li>Security collateral inc. CISO Workshops, and lots more -- https://aka.ms/MarksList<ul> <li>Please - if you haven't come across these two links above     before now - go and review and come back after</li> </ul> </li> <li>ASD Essential 8 Security controls - Microsoft Whitepaper - http://aka.ms/e8guides</li> <li>Everything regards M365 Features and Licensing - Feature Matrix | M365 Maps <ul> <li>Aaron Dinnage, Microsoft Canberra</li> <li>Plan comparison in detail - https://aka.ms/M365EnterprisePlans</li> </ul> </li> </ul>"},{"location":"GSD/#incident-response","title":"Incident Response:","text":"<ul> <li>CISO Lens Incident Response Template - November 2022 https://www.cisolens.com/reports#h.a769cex3vkl</li> <li>ACSC Exercise in a box https://www.cyber.gov.au/exercise-in-a-box</li> <li>Standardised Executive Reporting - an industry report from the CISO Lens community (June 2022)         https://www.cisolens.com/reports#h.z10davb23frq</li> </ul>"},{"location":"GSD/#still-to-do","title":"Still to do:","text":"<ul> <li>[ ] Get plugins working, date updated, contributors, etc...</li> <li>[ ] Link in announcement to discussion board</li> <li>[ ] update About</li> <li>[ ] Fix Tables</li> <li>[ ] Fix images</li> <li>[x] Assumed Knowledge</li> <li>[x] Assumed Licenses</li> <li>[ ] Acronym Table?</li> <li>[ ] Short paragraph on each heading - Preview at top or separate tab?</li> <li>[x] ToC/Index</li> <li>[ ] Add new Theme - https://github.com/byrnereese/mkdocs-bootstrap4  ???</li> <li>[x] Shadow Hunter &amp; In to the Breach - Immersive workshops for SecOps</li> <li>[ ] Zero Trust - https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/creating-mfa-policies-with-zero-trust-advanced-deployment-guide/ba-p/3688849</li> <li>[ ] CISA recommendations?</li> </ul>"},{"location":"GSD/#m365-defender-console","title":"M365 Defender Console:","text":"<ul> <li>Evaluate Defender 365: https://learn.microsoft.com/en-gb/microsoft-365/security/defender/eval-overview<ul> <li>Good step by step guide to getting everything turned on - but it is aimed at folks just starting</li> </ul> </li> <li>Test Use Cases: https://learn.microsoft.com/en-gb/microsoft-365/security/defender/integrate-microsoft-365-defender-secops-use-cases</li> <li>SOC Maintenance Tasks: https://learn.microsoft.com/en-gb/microsoft-365/security/defender/integrate-microsoft-365-defender-secops-tasks</li> </ul>"},{"location":"GSD/#1-mdi-microsoft-defender-for-identity","title":"1.   MDI (Microsoft Defender for Identity):","text":""},{"location":"GSD/#ways-of-working","title":"Ways of working","text":"<p>First decision point - do you have ANY Domain Controllers within your environment? If so then you should install MDI NOW and make it the very top of your Security ToDo list.</p> <p>Example of WHY you do this first:</p> <ul> <li>Small Customer in 2018, back when this was called \"Azure ATP\", installed only as a PoC and in under 48 hours it had identified a mis-configured Server that was exposed to the internet and was being brute-forced via RDP from Eastern Europe.</li> <li>Larger environment 2020, client not sure but was wanting to lock down Legacy Auth, suggested that as they had E5 strong recommendation to deploy MDI ASAP across DC's. After getting CAB Approval to deploy, and with less than 10% coverage of DC's in just over a week it popped up with \"NTDIS Exfil via SMB\"</li> <li>Security Value = Priceless</li> </ul>"},{"location":"GSD/#enable-telemetry","title":"Enable Telemetry","text":"<p>Start here - https://learn.microsoft.com/en-us/defender-for-identity/prerequisites 1.  Capacity planning - https://learn.microsoft.com/en-us/defender-for-identity/capacity-planning 2.   Download the Sizing tool - https://github.com/microsoft/ATA-AATP-Sizing-Tool/releases 3.   Download the Sensor - https://learn.microsoft.com/en-us/defender-for-identity/download-sensor 4.   Install the Sensor on DC's - https://learn.microsoft.com/en-us/defender-for-identity/install-sensor 5.   Basic Settings that you should review NOW - https://www.microsoft.com/videoplayer/embed/RWFVEX</p> <p>This will do for now, especially if you are in a crisis mode, check the console for the DC's being online - now move on to validation below. Please follow up with all other Configuration steps as soon as practible, especially if you also have ADFS in play.  For ADFS please also check - https://learn.microsoft.com/en-us/defender-for-identity/active-directory-federation-services</p> <p></p>"},{"location":"GSD/#validate-and-test","title":"Validate and Test","text":"<p>Be conscious that if you are testing that MDI is working correctly that this may trigger high impact Alerts to your Blue Team or existing SecOps IF it's already installed and being monitored - or for that matter if another tooling is in place to monitor the same behaviour - so if doing some major testing it's worthwhile letting them know before hand? And on that, make sure you schedule some time to review afterwards about what testing/alerting was created &amp; what was visible from a SecOps perspective? </p> <p>This would be valuable lessons on effectiveness - even more so if there is missing alerts?? :( </p> <ul> <li>Specific Validation information - https://learn.microsoft.com/en-us/defender-for-identity/configure-sensor-settings#validate-installations</li> <li>Make sure that Advanced Settings has Integration enabled - https://learn.microsoft.com/en-us/defender-for-identity/classic-integrate-mde</li> <li>Make doubly sure this Integration is enabled between ALL elements of MDI, MDE, MDO, MDCA and the M365 Defender Console </li> <li>Use Attack Simulations to validate MDI is installed correctly and Alerts are being surfaced accurately:     https://learn.microsoft.com/en-us/defender-for-identity/playbooks</li> <li>Use Labs for in depth checking: https://learn.microsoft.com/en-us/defender-for-identity/playbook-lab-overview</li> <li>https://learn.microsoft.com/en-us/defender-for-identity/playbook-domain-dominance</li> <li>Go to https://portal.atp.azure.com and if you see this, it's not been installed correctly </li> </ul>"},{"location":"GSD/#enable-reporting","title":"Enable Reporting","text":"<p>Once enabled you should now have a lot more visibility into the Security Posture of the onPrem environment - including the following:</p> <ul> <li>Domain controllers with Print Spooler service available</li> <li>Dormant entities in sensitive groups</li> <li>Entities exposing credentials in clear text</li> <li>Microsoft LAPS usage</li> <li>Legacy protocols usage</li> <li>Riskiest lateral movement paths (LMP)</li> <li>Unmonitored domain controllers</li> <li>Unsecure account attributes</li> <li>Unsecure domain configurations</li> <li>Unsecure Kerberos delegation</li> <li>Unsecure SID History attributes</li> <li>Weak cipher usage</li> </ul> <p>More details can be found here &amp; example below - https://learn.microsoft.com/en-us/defender-for-identity/security-assessment#assessment-reports </p>"},{"location":"GSD/#review-and-improve-as-needed","title":"Review and Improve as needed","text":"<ul> <li>Review Security Assessments to validate what potentially needs remediation: https://learn.microsoft.com/en-us/defender-for-identity/security-assessment#assessment-reports</li> <li>Full list of the 44 Alerts that are being checked on your behalf when fully deployed: https://learn.microsoft.com/en-us/defender-for-identity/alerts-overview</li> <li>If you do not use the default Administrator account (ideally have it disabled?) then please add it to the Honeytoken account list: https://learn.microsoft.com/en-us/defender-for-identity/entity-tags#honeytoken-tags</li> <li>Audit checking via Sentinel for MDI - https://thalpius.com/2022/12/14/microsoft-defender-for-identity-auditing-checker-using-sentinel</li> </ul>"},{"location":"GSD/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>https://learn.microsoft.com/en-us/defender-for-identity/troubleshooting-known-issues</li> <li>https://learn.microsoft.com/en-us/defender-for-identity/troubleshooting-using-logs</li> </ul>"},{"location":"GSD/#2-conditional-access","title":"2.   Conditional Access","text":""},{"location":"GSD/#ways-of-working_1","title":"Ways of working","text":"<p>First decision point - how are we going to do this? Questions to help you determine this are:</p> <ol> <li>Is it small or a large Tenancy?</li> <li>Do we want to avoid CAB approval process for a PoC?</li> <li>Need it done right now to address a strategic problem?</li> <li>Do we want to go fast, or take our time?</li> <li>If you are a Partner or MSSP please choose the \"As-Code\" method</li> </ol> <p>Result:</p> <ul> <li>Fast and quick - start with telemetry below and do it on the fly using Policies in Reporting Mode, iterate from there...</li> <li>Larger implmentations - please take the time to review the process below to enable via \"CA-as-Code\" as the ROI is well worth it - especially if doing it for more than one customer or tenant :wink:</li> </ul>"},{"location":"GSD/#enable-telemetry_1","title":"Enable Telemetry","text":"<p>!!! warning \"NOTE: please be aware there is no inherent \"BLOCK\" by default\"     You need to make sure you are BLOCKING by default unless explicitly allowing access - walk thru the 14 default Policies to better understand this. To make sure that you are fully covered please use this\u00a0PowerBI based tool https://github.com/AzureAD/AzureADAssessment Confirm your maturity based on this Tool ^^^^^^ </p> <p>!!! Note     UPDATE 142 Page - CA demystified Whitepaper - still to be reviewed      https://github.com/kennethvs/cabaseline202212/blob/main/Conditional%20Access%20demystified-v1.4%20-%20December%202022.pdf </p>"},{"location":"GSD/#the-microsoft-content","title":"The\u00a0Microsoft\u00a0content","text":"<ul> <li>Design - https://learn.microsoft.com/en-us/azure/architecture/guide/security/conditional-access-design</li> <li>Architecture - https://learn.microsoft.com/en-us/azure/architecture/guide/security/conditional-access-architecture</li> <li>Framework - https://learn.microsoft.com/en-us/azure/architecture/guide/security/conditional-access-framework</li> <li>API - https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/howto-conditional-access-apis</li> <li>Deployment - https://github.com/Azure-Samples/azure-ad-conditional-access-apis/tree/main/03-deploy</li> <li>Plan - https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/plan-conditional-access</li> <li>CA for Cloud Apps - https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/concept-conditional-access-cloud-apps</li> <li>Concept for CA Policies - https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/concept-conditional-access-policies</li> <li>Docs - https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/</li> <li>Powershell syntax and examples - https://learn.microsoft.com/en-us/powershell/module/azuread/get-azureadmsconditionalaccesspolicy?view=azureadps-2.0</li> <li>Deep dive: How does Conditional Access block Legacy Authentication? - https://techcommunity.microsoft.com/t5/itops-talk-blog/deep-dive-how-does-conditional-access-block-legacy/ba-p/3265345</li> </ul> <p>!!! Note      Here is a great companion for Sentinel:      https://danielchronlund.com/2022/04/21/a-powerfull-conditional-access-change-dashboard-for-microsoft-sentinel/</p>"},{"location":"GSD/#automation-of-ca-as-code","title":"Automation of \"CA-as-Code\"","text":"<ul> <li> <p>Thomas N. - https://www.cloud-architekt.net/speaking/ The most recent deck -- 2022-06-11 Scottish Summit 2022 \"Deploying and Managing Conditional Access at Scale\" Slides</p> </li> <li> <p>Excellent article here that is really worth the time reading as this will highlight how to enable this in detail: https://www.cloud-architekt.net/aadops-conditional-access/</p> </li> </ul> <p></p> <p>!!! Tip     He also points out the others that have done great work in this space:</p> <ul> <li>Fortigi/ConditionalAccess: (https://github.com/Fortigi/ConditionalAccess)</li> <li>AlexFilipin/ConditionalAccess: (https://github.com/AlexFilipin/ConditionalAccess)</li> <li>DanielChronlund/DCToolbox: Tools for Microsoft cloud fans (https://github.com/DanielChronlund/DCToolbox)</li> </ul> <p>!!! Info     One other important point -- don't get caught up trying to manage GUID's: -   Fortigi has published some build scripts on GitHub\u00a0to convert those GUIDs to readable display names. -   This also covers known GUIDs such as AAD Role and Application ID to DisplayName.</p>"},{"location":"GSD/#validate-and-test_1","title":"Validate and Test","text":"<p>https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/what-if-tool</p> <p>https://www.cloud-architekt.net/aadops-conditional-access/</p>"},{"location":"GSD/#enable-reporting_1","title":"Enable Reporting","text":"<p>https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/howto-conditional-access-insights-reporting</p>"},{"location":"GSD/#review-and-improve-as-needed_1","title":"Review and Improve as needed","text":"<p>Rerun check with AzureAD Assessment Tool</p>"},{"location":"GSD/#troubleshooting_1","title":"Troubleshooting","text":"<p>https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/plan-conditional-access#troubleshoot-conditional-access-policy</p> <p>Check for common misconfigurations - https://www.trustedsec.com/blog/common-conditional-access-misconfigurations-and-bypasses-in-azure/</p>"},{"location":"GSD/#3-microsoft-defender-for-cloud-apps-mdca-was-mcas","title":"3.   Microsoft Defender for Cloud Apps (MDCA), was MCAS):","text":""},{"location":"GSD/#ways-of-working_2","title":"Ways of working","text":"<p>First decision point - Simple or Complex, i.e. do you need to be concerned about RBAC for instance becuase of the scale of the installation or the number of different parties that may need access to part or some parts of the console?  https://learn.microsoft.com/en-us/defender-cloud-apps/manage-admins</p>"},{"location":"GSD/#enable-telemetry_2","title":"Enable Telemetry","text":"<ul> <li>Basic Setup --&gt; Start here: https://learn.microsoft.com/en-us/defender-cloud-apps/general-setup https://learn.microsoft.com/en-us/defender-cloud-apps/get-started</li> <li>Tell it what the Corporate IP address's are:  https://learn.microsoft.com/en-us/defender-cloud-apps/ip-tags</li> <li>Set the IP's in bulk if needed: https://learn.microsoft.com/en-us/defender-cloud-apps/api-data-enrichment-manage-script</li> <li>Enable File Monitoring: https://learn.microsoft.com/en-us/defender-cloud-apps/file-filters</li> <li>Add native App Connectors: (Atlassian, Google, Azure, AWS, Box, DocuSign, Github, Okta, Salesforce, ServiceNow, Slack, Workday, etc... ) https://learn.microsoft.com/en-us/defender-cloud-apps/enable-instant-visibility-protection-and-governance-actions-for-your-apps</li> <li>Best Practices: https://learn.microsoft.com/en-us/defender-cloud-apps/best-practices</li> <li>Daily Activities: https://learn.microsoft.com/en-us/defender-cloud-apps/daily-activities-to-protect-your-cloud-environment</li> </ul> <p>The best practices discussed in the link above include:</p> <ul> <li>Discover and assess cloud apps</li> <li>Apply cloud governance policies</li> <li>Limit exposure of shared data and enforce collaboration policies</li> <li>Discover, classify, label, and protect regulated and sensitive data stored in the cloud</li> <li>Enforce DLP and compliance policies for data stored in the cloud</li> <li>Block and protect download of sensitive data to unmanaged or risky devices</li> <li>Secure collaboration with external users by enforcing real-time session controls</li> <li>Detect cloud threats, compromised accounts, malicious insiders, and ransomware</li> <li>Use the audit trail of activities for forensic investigations</li> <li>Secure IaaS services and custom apps</li> </ul> <p>!!! warning     -   For best protection, we recommend selecting all Office 365 components.     -   The Office 365 files component, requires the Office 365 activities component and Defender for Cloud Apps file monitoring (Settings &gt; Files &gt; Enable file monitoring).     -   Make sure the last checkbox (Office 365 Files) in the image below is \"checked\" link to more details </p> <p></p>"},{"location":"GSD/#validate-and-test_2","title":"Validate and Test","text":"<ul> <li>Enable MDE Integration https://learn.microsoft.com/en-us/defender-cloud-apps/mde-integration </li> <li>Enable MDI Integration https://learn.microsoft.com/en-us/defender-cloud-apps/mdi-integration</li> <li>Govern discovered Apps using MDE (enables blocking of unwanted Apps) https://learn.microsoft.com/en-us/defender-cloud-apps/mde-govern</li> <li>Investigating via Dashboard: https://learn.microsoft.com/en-us/defender-cloud-apps/investigate</li> <li>Tune the system:  https://learn.microsoft.com/en-us/defender-cloud-apps/tutorial-suspicious-activity</li> <li>Investigate &amp; remediate risky OAuth Apps: https://learn.microsoft.com/en-us/defender-cloud-apps/investigate-risky-oauth</li> </ul> <p>!!! note     -   It takes up to two hours after you enable the integration for the data to show up in Defender for Cloud Apps.     -   List of supported Firewalls and Proxies     -   Follow link above for Integration steps with ZScaler, iboss, Menlo, etc...</p> <p></p>"},{"location":"GSD/#enable-reporting_2","title":"Enable Reporting","text":"<ul> <li>Investigate Apps discovered by MDE  https://learn.microsoft.com/en-us/defender-cloud-apps/mde-investigation</li> <li>Governance for Connected Apps: https://learn.microsoft.com/en-us/defender-cloud-apps/governance-actions This is where this process gets really good, have a real good look at all the possibilities here to be able to be able to track what is being done with data inside the environment - don't jump in &amp; start blocking things before you understand the full business implications. </li> <li>Governance for discovered Apps: https://learn.microsoft.com/en-us/defender-cloud-apps/governance-discovery Now we can take this one step further and we can now determine which of the 26,000 SaaS Apps I want to allow or block - the only real limitation (to a certain extent) is that the user is using corporate credentials from our AAD via an endpoint enabled with MDE </li> </ul>"},{"location":"GSD/#review-and-improve-as-needed_2","title":"Review and Improve as needed","text":"<ul> <li>Add Conditional Access App Control into the mix - this is where we are starting to get more into Zero Trust - so don't jump in here first, make sure the rest of the Security settings are in place and then come back to this in a later phase https://learn.microsoft.com/en-us/defender-cloud-apps/proxy-intro-aad</li> </ul> <p>There is a lot more to be covered, but this will do for now, if you have questions please let us know? https://github.com/dcaddick/gsd_public/discussions</p>"},{"location":"GSD/#troubleshooting_2","title":"Troubleshooting","text":"<ul> <li>Advanced Settings URL: https://security.microsoft.com/cloudapps/settings</li> <li> <p>Troubleshooting:  https://learn.microsoft.com/en-us/defender-cloud-apps/troubleshooting-cloud-discovery</p> </li> <li> <p>Apps list</p> </li> <li>Sanctioned/Unsanctioned</li> <li>Don't forget this is based on MDE so go back and check the MDE integration link above \u00a0</li> </ul>"},{"location":"GSD/#4-mde-microsoft-defender-for-endpoint","title":"4.   MDE (Microsoft Defender for Endpoint):","text":"<ul> <li>Consider enabling Block at First Sight from AV: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/configure-block-at-first-sight-microsoft-defender-antivirus</li> <li>Block at First Sight - test/demo: https://demo.wd.microsoft.com/Page/BAFS</li> <li>Demonstrate &amp; Test security controls: ASR, SmartScreen, PUA, etc... https://demo.wd.microsoft.com/</li> <li>Scenarios &amp; Features: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/defender-endpoint-demonstrations</li> <li>Plan Deployment: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/deployment-strategy</li> <li>Linux Advanced Guidance: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/comprehensive-guidance-on-linux-deployment</li> <li>Architecture: https://download.microsoft.com/download/5/6/0/5609001f-b8ae-412f-89eb-643976f6b79c/mde-deployment-strategy.pdf</li> <li>Deployment Phases: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/deployment-phases     Defender for Endpoint is for Endpoints, Servers actually belong in \"Defender for Cloud\":     https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/migrating-mde-server-to-cloud</li> <li>Configure Device Discovery: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/configure-device-discovery</li> <li>Check it's working --&gt; Simulated Attacks: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/attack-simulations</li> <li>Automation Levels: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/automation-levels?view=o365-worldwide</li> <li>Configure AIR capabilities: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/configure-automated-investigations-remediation</li> <li>Attack Surface Reduction (ASR) rules: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/attack-surface-reduction</li> <li>ASR Rules Deployment: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/attack-surface-reduction-rules-deployment</li> <li>Troubleshooting: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/check-sensor-status</li> <li>Troubleshooting mode for devices: https://jeffreyappel.nl/microsoft-defender-for-endpoint-troubleshooting-mode-how-to-use-it/</li> <li>Migration Guide: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/migration-guides</li> </ul>"},{"location":"GSD/#intune-mde-microsoft-defender-for-endpoint","title":"Intune - MDE (Microsoft Defender for Endpoint):","text":"<ul> <li>Easy starting point, step-by-step guide: https://learn.microsoft.com/en-us/mem/solutions/cloud-native-endpoints/cloud-native-windows-endpoints</li> <li>Ideally start with Security Baselines: https://endpoint.microsoft.com/#view/Microsoft_Intune_Workflows/SecurityManagementMenu/~/securityBaselines  These are updated every 6 months and you'll be prompted to update/accept changes</li> </ul> <p> -   ASR rules deployment steps: https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/attack-surface-reduction-rules-deployment -   If needed import your old GPO's: https://endpoint.microsoft.com/#view/Microsoft_Intune_DeviceSettings/DevicesMenu/~/policyAnalyticsReport</p>"},{"location":"GSD/#mde-using-asr-stand-alone-e3","title":"MDE using ASR stand-alone (E3)","text":"<ul> <li>https://www.computerworld.com/article/3604651/decoding-windows-defender-s-hidden-settings.html</li> <li>https://github.com/AndyFul/ConfigureDefender</li> <li>https://www.defenderui.com/</li> <li>https://github.com/beerisgood/Windows11_Hardening</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-define-the-av-baseline-part4a/</li> </ul>"},{"location":"GSD/#5-mdo-microsoft-defender-for-office","title":"5.   MDO (Microsoft Defender for Office):","text":"<ul> <li>Try in Audit mode: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/try-microsoft-defender-for-office-365</li> <li>Enhanced Filters aka Skip Listing: https://learn.microsoft.com/en-us/Exchange/mail-flow-best-practices/use-connectors-to-configure-mail-flow/enhanced-filtering-for-connectors</li> <li>Step-by-Step guide: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/step-by-step-guides/step-by-step-guide-overview</li> <li>SecOps Guide: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/mdo-sec-ops-guide</li> <li>Features: https://learn.microsoft.com/en-us/office365/servicedescriptions/microsoft-defender-for-office-365-features</li> <li>AIR: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/office-365-air</li> <li>How AIR works: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/office-365-air</li> <li>Protect against Threats: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/protect-against-threats</li> <li>Recommended Settings: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/recommended-settings-for-eop-and-office365</li> <li>Config Analyzer: https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/configuration-analyzer-for-security-policies</li> </ul>"},{"location":"GSD/#6-mdc-microsoft-defender-for-cloud","title":"6.   MDC (Microsoft Defender for Cloud):","text":"<ul> <li>How to deploy MDC at scale: https://onedrive.live.com/?authkey=%21AIzlpf%2DTsBYFMbk&amp;cid=66C31D2DBF8E0F71&amp;id=66C31D2DBF8E0F71%212663&amp;parId=66C31D2DBF8E0F71%212662&amp;o=OneUp</li> <li>Don't forget the Community at Github: https://github.com/Azure/Microsoft-Defender-for-Cloud<ul> <li>Labs to help you get started in deployment: https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Labs</li> <li>Onboarding: https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Onboarding</li> <li>Policy: https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Policy</li> <li>Powershell Scripts: https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Powershell%20scripts</li> <li>Simulations (check it's working): https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Simulations</li> <li>Workbooks: https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Workbooks</li> <li>Workflow Automation: https://github.com/Azure/Microsoft-Defender-for-Cloud/tree/main/Workflow%20automation</li> </ul> </li> </ul>"},{"location":"GSD/#7-sentinel-tips-and-best-practices","title":"7.   Sentinel Tips and Best Practices:","text":"<ul> <li>https://learn.microsoft.com/en-us/azure/sentinel/best-practices</li> <li>https://techcommunity.microsoft.com/t5/microsoft-sentinel-blog/best-practices-for-designing-a-microsoft-sentinel-or-azure/ba-p/832574</li> <li>https://learn.microsoft.com/en-us/azure/sentinel/extend-sentinel-across-workspaces-tenants</li> <li>https://learn.microsoft.com/en-us/azure/sentinel/best-practices-workspace-architecture</li> <li>Microsoft Sentinel benefit for Microsoft 365 E5     Customers</li> <li>Security Data Types -     https://docs.microsoft.com/en-us/azure/defender-for-cloud/enhanced-security-features-overview#what-data-types-are-included-in-the-500-mb-data-daily-allowance</li> <li>General recommendation is for Customers to focus efforts on increasing efficiency and reducing TTR (time to remediate) via Automation &amp; SOAR natively within Microsoft Sentinel will naturally improve C3 (SecOps) efficiency without the need for any additional tools.<ul> <li>More information:</li> <li>CISO series: Lessons learned from the Microsoft SOC---Part 3a: Choosing SOC tools</li> <li>CISO series: Lessons learned from the Microsoft SOC---Part 3b: A day in the life</li> <li>CISO Series: Lessons learned from the Microsoft SOC---Part 3c: A day in the life part 2</li> </ul> </li> </ul> <p>-   Raw logs by their very nature have a significant cost related to \"data gravity\" - the more Customers move/copy the logs the more complex the environment as well as more expensive the solution becomes - the design principle that should be recommend is to adhere to the MS Best Practices as much as possible.     https://learn.microsoft.com/en-us/azure/sentinel/best-practices-data -   Should there be any business justification or requirement for \"raw logs\" please consider a much more efficient method is the ability to stream \"advanced hunting\" events:     -   Why ingest or duplicate massive data sets across multiple systems based on a \"just in case\" scenario     -   A much more efficient system would be to define the \"advanced hunting\" event that is being searched for and as and when matches are discovered the event is forwarded     -   This process will respect data gravity and reduce costs significantly     -   More information can be found here: Advanced hunting event collection</p>"},{"location":"GSD/#azure-log-management","title":"Azure Log Management:","text":"<pre><code>-   [Design a Log Analytics workspace architecture - Azure Monitor](https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fazure-monitor%2Flogs%2Fworkspace-design&amp;data=05%7C01%7Cdavecaddick%40microsoft.com%7Ca9c6aea6a2e34b1a57c008dabba5de49%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C638028618327569401%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=1CPvtNtBZPRUtrYS464Iw0I%2B1E9BNKr7Fid9cVN9hbQ%3D&amp;reserved=0)\n\n-   [Workspace architecture best practices for Microsoft Sentinel](https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fsentinel%2Fbest-practices-workspace-architecture&amp;data=05%7C01%7Cdavecaddick%40microsoft.com%7Ca9c6aea6a2e34b1a57c008dabba5de49%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C638028618327569401%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=FJ25vCIn0M75eSXIeSiSkGnLEAQYoNbzUKKAdcPfAM8%3D&amp;reserved=0)\n\n-   [Best practices for data collection in Microsoft Sentinel](https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fsentinel%2Fbest-practices-data&amp;data=05%7C01%7Cdavecaddick%40microsoft.com%7Ca9c6aea6a2e34b1a57c008dabba5de49%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C638028618327569401%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=gVLZDafeeOVo4O%2FCFrtjb98t2GIx5wKaOkXZplFxmXc%3D&amp;reserved=0)\n</code></pre>"},{"location":"GSD/#filtering-logs","title":"Filtering Logs:","text":"<pre><code>Can be used to reduce data noise, reduce ingestion and retention/storage costs with the goal being to focus on the logs and events that are relevant - This is typically performed by one of the methods for the following scenarios:\n\n-   Server Log Ingestion - Azure Monitor Agent Directly can filter out logs that are not relevant for Microsoft Sentinel &lt;https://docs.microsoft.com/en-us/azure/sentinel/best-practices-data#filter-your-logs-before-ingestion&gt;\n\n-   Syslog and CEF Ingestion -- Using a log forwarder such as Logstash can parse the logs based on Customers defined rules\n    &lt;https://docs.microsoft.com/en-us/azure/sentinel/best-practices-data#filter-your-logs-before-ingestion&gt;\n\n-   Custom REST API Ingestion -- Via the Function or Logic App, data can be stripped away prior to sending to Microsoft sentinel\n</code></pre> <ul> <li> <p>Looking deeper into the \"Free data meters\" it is possible to use this URL to find the following Table     https://docs.microsoft.com/en-us/azure/sentinel/billing?tabs=free-data-meters#understand-your-microsoft-sentinel-bill</p> </li> <li> <p>The following table shows how Microsoft Sentinel and Log Analytics costs appear in the\u00a0Service name\u00a0and\u00a0Meter\u00a0columns of your Azure bill for free data services. For more information, see\u00a0View Data Allocation Benefits.</p> </li> </ul> <p></p>"},{"location":"GSD/#sentinel-recommendation-to-enable-m365-defender-connector","title":"Sentinel - Recommendation to enable M365 Defender Connector:","text":"<ul> <li> <p>More information: https://docs.microsoft.com/en-us/azure/sentinel/microsoft-365-defender-sentinel-integration</p> </li> <li> <p>Incident creation rules that need to be mindful of to avoid creating multiple Incidents</p> </li> <li> <p>Bi-directional Sync between M365 Defender &amp; Sentinel</p> </li> <li> <p>Focus on bringing all source logging relevant to the Users Device into the one location where it can be corelated quickly and seamlessly into a SOAR process to reduce friction and improve TTR times for SecOps More information: https://docs.microsoft.com/en-us/azure/sentinel/microsoft-365-defender-sentinel-integration</p> </li> </ul> <p>!!! Note \"Sentinel Free Data ingestion: always remember \"data collection\" is NOT detection!!\" -   https://learn.microsoft.com/en-us/azure/sentinel/billing?tabs=free-data-meters#free-data-sources -   https://learn.microsoft.com/en-us/azure/sentinel/billing-monitor-costs#view-costs-by-using-cost-analysis -   https://learn.microsoft.com/en-us/azure/sentinel/billing-monitor-costs#run-queries-to-understand-your-data-ingestion -   https://learn.microsoft.com/en-us/azure/sentinel/billing-monitor-costs#deploy-a-workbook-to-visualize-data-ingestion -   https://learn.microsoft.com/en-us/azure/sentinel/billing-reduce-costs#separate-non-security-data-in-a-different-workspace -   https://learn.microsoft.com/en-us/azure/sentinel/billing-reduce-costs#optimize-log-analytics-costs-with-dedicated-clusters -   https://learn.microsoft.com/en-us/azure/sentinel/best-practices-data#filter-your-logs-before-ingestion</p>"},{"location":"GSD/#8-microsoft-information-protection-mipaip","title":"8.   Microsoft Information Protection (MIP/AIP)","text":"<p>This page will also cover DLP, but we'll probably build out a whole new section on Purview as this site matures, thank you for your patience - please feel free to provide feedback via raising an issue in Github.</p> <ul> <li>MIP/AIP - https://techcommunity.microsoft.com/t5/security-compliance-and-identity/azure-information-protection-and-the-information-protection/ba-p/3671070</li> <li>Adaptive Protection (DLP rules based on Insider Risk)</li> <li>Login as GA (or eqiv.) - https://admin.microsoft.com/adminportal/home?#/modernonboarding/mipsetupguide</li> <li></li> <li>Docs - https://learn.microsoft.com/en-gb/microsoft-365/compliance/information-protection</li> <li>DLP - https://learn.microsoft.com/en-gb/microsoft-365/compliance/dlp-learn-about-dlp</li> <li>What's new - https://learn.microsoft.com/en-gb/microsoft-365/compliance/whats-new</li> </ul>"},{"location":"GSD/#9-asd-essential-8-now-acsc","title":"9.   ASD Essential 8 (now ACSC)","text":"<ul> <li>Great high level on all Essential 8 - https://www.microsoft.com/en-au/business/topic/security/essential-eight/</li> <li>6 videos that walk thru - https://info.microsoft.com/AU-SCRTY-CATALOG-FY21-02Feb-14-TheEssentialEightforSecurityinPractice-SRDEM61939_CatalogDisplayPage.html</li> <li>MCRA https://aka.ms/MCRA or https://learn.microsoft.com/en-us/security/cybersecurity-reference-architecture/mcra</li> <li>General on Essential 8 - https://www.microsoft.com/en-au/business/topic/security/</li> <li>Daily backups: https://www.microsoft.com/en-au/business/topic/security/essential-eight/daily-backups/</li> <li>Australian IRAP - https://learn.microsoft.com/en-us/azure/compliance/offerings/offering-australia-irap &amp; https://servicetrust.microsoft.com/Viewpage/AustraliaIRAP</li> <li>Local Australian guide in Service Trust Portal https://aka.ms/e8guides</li> </ul>"},{"location":"GSD/#hardening-guidance-from-acsc","title":"Hardening Guidance from ACSC:","text":"<ul> <li>https://www.cyber.gov.au/acsc/view-all-content/publications/hardening-microsoft-windows-10-version-21h1-workstations</li> <li>https://www.cyber.gov.au/acsc/view-all-content/publications/hardening-microsoft-365-office-2021-office-2019-and-office-2016</li> <li>https://www.cyber.gov.au/acsc/view-all-content/publications/microsoft-office-macro-security</li> <li>https://github.com/microsoft/Intune-ACSC-Windows-Hardening-Guidelines</li> <li>Windows Security Baseline (for use with ACSC Windows Hardening Guidelines)</li> <li>ACSC Windows Hardening Guidelines-Attack Surface Reduction</li> <li>WDAC Policy creation from DTA - https://desktop.gov.au/blueprint/abac/wdac-policy-creation.html</li> </ul>"},{"location":"GSD/#hardening-azure-ad","title":"Hardening Azure AD:","text":"<ul> <li>Secure your Azure AD identity infrastructure - Azure Active Directory</li> <li>Also worth reviewing our Essential 8 guidance, especially MFA (aka.ms/e8guides)</li> <li>Microsoft Azure Identity Security Compass - Microsoft Security Best Practices</li> <li>Active Directory - Best Practices for Securing Active Directory</li> </ul>"},{"location":"GSD/#ad-onprem","title":"AD onPrem:","text":"<p>A list of resources from DART perspective on Active Directory - courtesy of Matt Zorich (Twitter @reprise99) -   BloodHound Edges - https://bloodhound.readthedocs.io/en/latest/data-analysis/edges.html -   AD Security - https://adsecurity.org/?page_id=4031 -   http://ired.team notes - https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse... -   SID History Persistence - https://adsecurity.org/?p=1772 -   How AdminSdHolder &amp; SDProp work - https://techcommunity.microsoft.com/t5/ask-the-directory-services-team/five-common-questions-about-adminsdholder-and-sdprop/ba-p/396293... -   Recovering from systemic identity compromise - https://learn.microsoft.com/en-us/azure/security/fundamentals/recover-from-identity-compromise -   Abusing Active Directory ACLs/ACEs - https://book.hacktricks.xyz/windows-hardening/active-directory-methodology/acl-persistence-abuse... -   Defender for Identity Alerts Overview - https://learn.microsoft.com/en-us/defender-for-identity/alerts-overview... -   Best practices for securing AD - https://learn.microsoft.com/en-us/windows-server/identity/ad-ds/plan/security-best-practices/best-practices-for-securing-active-directory -   Mimikatz DCSync Abuse - https://adsecurity.org/?p=1729 -   Kerberoasting Overview - https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/t1208-kerberoasting... -   Monitoring AD for signs of compromise - https://learn.microsoft.com/en-us/windows-server/identity/ad-ds/plan/security-best-practices/monitoring-active-directory-for-signs-of-compromise</p>"},{"location":"GSD/#identity","title":"Identity:","text":"<ul> <li>Best Practices: https://learn.microsoft.com/en-us/security/compass/compass</li> <li>https://jeffreyappel.nl/tips-for-preventing-against-new-modern-identity-attacks-aitm-mfa-fatigue-prt-oauth/     look at Partner section</li> <li>MDCA (was MCAS) policies from AADIP P2 moving to D365 Console</li> <li>https://learn.microsoft.com/en-us/microsoft-365/security/defender/microsoft-365-security-center-defender-cloud-apps?view=o365-worldwide&amp;WT.mc_id=AZ-MVP-5004291#control</li> <li>https://www.linkedin.com/posts/sami-lamppu_microsoft-defender-for-cloud-apps-in-microsoft-activity-7011278821773471744-TcvX?</li> </ul>"},{"location":"GSD/#exchange-permissions-check","title":"Exchange Permissions check:","text":"<ul> <li>https://office365itpros.com/2020/03/16/exchange-online-mailbox-permissions/</li> <li>https://github.com/12Knocksinna/Office365itpros/blob/master/ReportMailboxPermissionsMailboxes.PS1</li> <li>https://office365itpros.com/2020/03/23/reporting-exchange-online-folder-permissions/</li> <li>https://github.com/12Knocksinna/Office365itpros/blob/master/ReportPermissionsFolderLevel.PS1 <p>The two are subtly different, the first is on mailboxes, the second is more focused on the Outlook Folders</p> </li> </ul>"},{"location":"GSD/#mde-from-mvps","title":"MDE (from MVP's):","text":"<ul> <li>Defender for Endpoint Policy Must Haves -     https://www.linkedin.com/posts/emannon_1dfv-2dfv-3dfv-activity-6989618122601230338-q2uK?</li> <li>Do you use Defender for Endpoint -     https://www.linkedin.com/posts/emannon_defender-mde-zeek-activity-6989307538726948864-C2Oj?</li> <li> <ol> <li>Do you use MDE for EDR/NGAV\u2753</li> </ol> </li> <li> <ol> <li>Did you deploy the MDE network scanner\u2049\ufe0f     https://www.linkedin.com/posts/emannon_msftadvocate-defender-iotsecurity-activity-6986838402071478272-dLRV?</li> </ol> </li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-what-is-defender-for-endpoint-part1/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-configure-defender-for-endpoint-part2/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-onboard-defender-for-endpoint-part3/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-onboard-using-microsoft-intune-part3a/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-onboard-using-defender-for-cloud-part3b/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-onboard-using-azure-arc-part3c/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-onboard-using-gpo-mecm-part3d/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-configure-av-next-generation-protection-part4/</li> <li>https://jeffreyappel.nl/microsoft-defender-for-endpoint-series-define-the-av-baseline-part4a/</li> </ul> <p>### Migration:</p> <ul> <li>https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/migration-guides</li> <li>https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/switch-to-mde-overview</li> </ul>"},{"location":"GSD/#10-wdac-windows-defender-application-control","title":"10.   WDAC: (Windows Defender Application Control)","text":"<p>Work in Progress, please review all content before starting, and be cautious in deployment</p> <ul> <li>From Eric Mannon: https://www.linkedin.com/feed/update/urn:li:activity:6996238396973051904/</li> <li>Read the above article first</li> <li>1st- Install WDACme on all W10 workstations</li> <li>2nd- Enable \"Smart Application Control\" in Evaluation mode on W11 endpoints that support it</li> <li>3rd- Lock down Tier 0 (DC's, ADFS &amp; AD Connect servers) with WDAC Microsoft-only mode in block mode. (No 3rd party software should ever be installed on the Tier 0 server type)</li> <li>4th- Deploy a supplemental policy to block the Microsoft recommended block list</li> <li>\ud83d\udd11Golden rule: \"Audit is better than nothing\"</li> <li>\ud83c\udfafDesired state: \"Zero Trust for unapproved code\"</li> </ul> <p>\ud83c\udf92Resources:</p> <ul> <li>WDAC Deployment: https://lnkd.in/em8sV9AK</li> <li>\u26c4\ufe0f Olaf Hartong's: WDACMe: https://lnkd.in/gU33rPzf</li> <li>W11 Smart App Control: https://lnkd.in/e5X3WF9H</li> <li>Recommended Block Rules: https://lnkd.in/eZEwcwM9</li> <li>WDAC Policy Wizard: https://lnkd.in/gwFuvmd4</li> <li>Hunting WDAC Events in KQL: https://lnkd.in/eJE8WHZG</li> </ul>"},{"location":"GSD/#additional-resources","title":"Additional Resources:","text":"<ul> <li>Creating a policy for machines already in use (this is the hard one) https://learn.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/create-initial-default-policy#create-a-custom-base-policy-to-minimize-user-impact-on-in-use-client-devices</li> <li>WDAC Policy creation from DTA - https://desktop.gov.au/blueprint/abac/wdac-policy-creation.html</li> <li>https://www.cyber.gov.au/acsc/view-all-content/publications/implementing-application-control</li> <li>https://learn.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/create-wdac-deny-policy</li> <li>https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/deploying-windows-10-application-control-policy/ba-p/2486267</li> <li>https://learn.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/select-types-of-rules-to-create</li> <li>https://learn.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/microsoft-recommended-block-rules</li> <li>https://learn.microsoft.com/en-us/windows/security/threat-protection/windows-defender-application-control/windows-defender-application-control-deployment-guide</li> </ul>"},{"location":"GSD/#defender-for-business","title":"Defender for Business:","text":"<ul> <li>Review the technical documentation\u00a0 https://aka.ms/MDB-Docs </li> <li>Review the Partner asset\u00a0 https://aka.ms/MDBPartnerKit </li> <li>Attend SMB Partner Webinars\u00a0 https://aka.ms/M365MDBSeries </li> <li>Join Office Hours\u00a0 https://aka.ms/MDB-Office-Hours </li> <li>Be aware of Lighthouse\u00a0 https://aka.ms/M365Lighthouse</li> </ul> <p>Updated Guides:\u00a0 -   Exchange Online to Business Premium -   Business Standard to Business Premium -   Business Basic to Business Premium</p> <p>Updated Microsoft 365 Business Premium\u00a0Customer Pitch Decks: -   Business Decision Maker Pitch Deck -   IT Decision Maker Pitch Deck\u00a0 -   Updated Webinar:\u00a0Having a customer conversation on security for Business\u00a0Premium upsell </p>"},{"location":"GSD/#ninja-security-training","title":"Ninja Security Training:","text":"<ul> <li>M365 Defender : https://aka.ms/m365dninja</li> <li>Microsoft Defender for Endpoint: https://aka.ms/mdeninja</li> <li>Microsoft Defender for Identity : https://aka.ms/MDINinja</li> <li>Microsoft Defender for O365 : https://aka.ms/mdoninja</li> <li>Microsoft Defender for Cloud Apps: http://aka.ms/mcasninja (formerly MCAS)</li> <li>Microsoft Sentinel : https://aka.ms/sentinelninja</li> <li>Microsoft Sentinel for MSSP : http://aka.ms/azsentinelmssp</li> <li>Microsoft Defender for Cloud : http://aka.ms/ascninja</li> <li>Azure Network Security Ninja : http://aka.ms/aznetsecninja</li> <li>Microsoft Defender for IoT: https://aka.ms/d4iotninja</li> <li>Microsoft Purview Information Protection: https://aka.ms/mipninja </li> <li>Microsoft Purview DLP ninja: https://aka.ms/DLPNinja </li> <li>Microsoft Purview Insider Risk Management: https://aka.ms/insiderriskninja </li> <li>Microsoft Purview eDiscovery: https://aka.ms/ediscoveryninja </li> <li>Microsoft Purview Communication Compliance: https://aka.ms/communicationcomplianceninja</li> <li>Microsoft Purview Compliance Manager: http://aka.ms/compliancemanagerninja</li> <li>Sentinel Automation: https://techcommunity.microsoft.com/t5/microsoft-sentinel-blog/become-a-microsoft-sentinel-automation-ninja/ba-p/3563377</li> <li>Sentinel Notebooks: https://techcommunity.microsoft.com/t5/microsoft-sentinel-blog/becoming-a-microsoft-sentinel-notebooks-ninja-the-series/ba-p/2693491</li> <li>Microsoft Threat Intelligence: https://techcommunity.microsoft.com/t5/microsoft-defender-threat/become-a-microsoft-defender-threat-intelligence-ninja-the/ba-p/3656965</li> <li>Must Learn KQL: https://github.com/rod-trent/MustLearnKQL</li> <li>Kusto Detective Agency: https://detective.kusto.io</li> <li>Microsoft Defender for Endpoint Trial: https://aka.ms/mdetrial</li> <li>Exam SC-900: https://learn.microsoft.com/en-us/certifications/exams/sc-900</li> <li>Exam SC-200: https://learn.microsoft.com/en-us/certifications/exams/sc-200</li> </ul>"},{"location":"GSD/#interactive-guides","title":"Interactive Guides:","text":"<ul> <li>Defender for Cloud</li> <li>Microsoft Sentinel</li> <li>M365 Defender</li> <li>M365 Defender - Threat Protection</li> <li>MCAS - Detect Threat and manage Alerts</li> <li>MCAS - Discover, protect and control your Apps</li> <li>MDE - Investigate Threats</li> <li>MDE - Investigate and Remediate Threats</li> <li>MDE - Reduce Risk</li> <li>MDE - Threat and Vulnerability Management</li> <li>MDI - Detect Suspicious Activities</li> <li>MDI - Investigate Suspicious Activities</li> <li>MDI - Investigate and Respond to Attacks</li> <li>MDO - Safeguard Email</li> <li>MDO - Enable Protection</li> <li>Purview Insider Risk Management</li> <li>Purview Communications Risk </li> <li>Purview Information Protection</li> <li>Purview Forensic investigation of Security events</li> <li>Purview eDiscovery</li> </ul> <p> (Still working on Tables)</p>"},{"location":"GSD/#product-trials","title":"Product Trials:","text":"<ul> <li>Microsoft Defender for Identity</li> <li>Microsoft Defender for Office 365 P2</li> <li>Microsoft Defender for Endpoint P2</li> <li>Microsoft 365 E5 Security</li> <li>Microsoft Defender for IoT</li> <li>Microsoft Defender for Cloud Apps</li> <li>Microsoft Defender for Cloud Apps -- App Governance add-on</li> <li>Microsoft Sentinel</li> <li>Microsoft Defender for Office 365</li> <li>Microsoft Sentinel Labs</li> <li>Microsoft Defender for Endpoint P2</li> <li>Microsoft Purview Solutions</li> <li>Microsoft Purview Compliance Manager premium assessments</li> <li>Microsoft 365 E5 Insider Risk Management</li> <li>Microsoft 365 E5 Information Protection &amp; Governance</li> <li>Microsoft 365 E5 Compliance</li> <li>Microsoft Compliance Manager premium assessment</li> <li>Microsoft 365 E5 eDiscovery &amp; Audit</li> <li>Microsoft Priva</li> <li>Microsoft Priva Privacy Risk Management</li> <li>Microsoft Priva Subject Rights Requests</li> </ul>"},{"location":"GSD/#fasttrack","title":"FastTrack:","text":"<ul> <li>FastTrack Core Deck: https://aka.ms/FastTrackCoreDeck</li> <li>FastTrack Benefit Description Deck: https://aka.ms/FastTrackBenefitDeck</li> <li>FastTrack Ready Partners: https://aka.ms/FastTrackReadyPartners</li> <li>FastTrack customer one-pager: https://aka.ms/FastTrackOnePager</li> </ul>"},{"location":"GSD/#microsoft-private-security-communities-nda","title":"Microsoft Private Security Communities (NDA):","text":"<p>If you want to keep up to date with the latest + connect with your peers from Microsoft, Partners and Customers this is an invaluable resource</p> <ul> <li> <p>Microsoft Cloud Security Private Community - https://aka.ms/prseccom</p> </li> <li> <p>Microsoft 365 Defender Customer Connection Program - https://aka.ms/M365DefenderCCPSignUp</p> </li> </ul> <p>Both of the Team Channels above are covered by your NDA with Microsoft from either a Partner or Customer perspective.</p> <p>+--------------------------------------------+--------------------------------+ | Microsoft Cloud Security Private         | Microsoft 365 Defender       | | Community                                | Customer Connection Program  | +============================================+================================+ |            |  | |  | g) | |                                     |                                | | \u00a0                                   | \u00a0                              | |                                     |                                | |                                     |   | |                                     |                                | |                                     |                                | |                                     | \u00a0                              | +-------------------------------------+--------------------------------+</p> <p>https://aka.ms/JoinCCP</p> <p>---This form is currently only used for Compliance &amp; Privacy Community requests---  - To join the Windows CCP visit https://aka.ms/JoinWCCP  - To join the M365 Defender CCP visit https://aka.ms/M365DefenderCCPSignUp  - To join the MEM CCP visit https://aka.ms/JoinMEMCCP  - To join the Compliance &amp; Privacy CCP visit https://aka.ms/JoinCompliancePrivacyCCP</p>"},{"location":"GSD/#for-partners","title":"For PARTNERS:","text":"<ul> <li>Everything you wanted to know about Sentinel Architecture https://aka.ms/PartnerSocArchitecture</li> </ul> <p>All content listed will require Microsoft Partner login: i.e. use your work creds &amp; password this is already federated for you</p> <ul> <li> <p>MS Partner - go to https://cdx.transform.microsoft.com and get access to 5 x 90day demo Tenants for free + 1 for 1 year</p> <ul> <li>You will need to add Az Subs from either Pay-as-you-Go or MSDN for Items like Sentinel that require LAW, etc...</li> <li>Don't build it - Use a premade one - be aware that from the same location you can get access to CIE Demo tenants with additional pre-canned content for customer demos  (CIE = Customer Immersive Experiences)</li> <li>Don't waste time building demos \"unless\" the customer already has specific requirements</li> <li>Use this one below to access Contoso Hotels as a 3,000 seat Production demo hosted by Microsoft</li> <li>Search for or Choose \"Microsoft Sentinel &amp; Microsoft 365 Defender (SIEM &amp; XDR)\"</li> <li>Add the Customer name and you will get access to the following + the Launch button will pop up with Partner Creds (good for     24h):<ul> <li>SIEM&amp;XDR_Demo_Guide_v1.0_December2022</li> <li>XDR Sentinel Investigation Guide</li> <li>SIEM &amp; XDR Demo scenario walkthrough recording (Heike Ritter - 59m)</li> </ul> </li> <li>SIEM &amp; XDR - CxE walks you through the new security operation demo based on the AiTM (Adversary in the Middle) phishing attack leveraging both Microsoft 365 Defender &amp; Microsoft Sentinel.</li> <li>Defender Security Console - https://security.microsoft.com/homepage?tid=4b2462a4-bbee-495a-a0e1-f23ae524cc9c</li> </ul> </li> <li> <p>Partner: https://cloudpartners.transform.microsoft.com/</p> </li> <li>Security Workshops: https://cloudpartners.transform.microsoft.com/workshops?tab=security-usage</li> <li>Security Training: https://readiness.transform.microsoft.com/learning-paths/b7963402-e1ba-4485-8889-af04614e2d1b</li> <li>Build Intent Workshops: https://partner.microsoft.com/en-us/partnership/partner-incentives/modern-work-and-security-build-intent-workshops</li> </ul>"},{"location":"GSD/#build-intent-workshops","title":"Build Intent Workshops","text":"<ul> <li>Workshops Available: Partners can nominate Customers and receive USD $5K funding upon successful PoE submission</li> <li>Make sure you review the content below, it's typically very recent (within 6 months), and laid out very well in a structured manner with plenty of content in slide decks along with example SoW's &amp; estimate effort</li> <li>Full list of workshops below with direct links below the table</li> </ul> Sales Usage Defend Against Threats with SIEM Plus XDR Defend Against Threats with SIEM Plus XDR Executive Order 14028 (Zero Trust) Secure Identities and Access Mitigate Compliance and Privacy Risks Mitigate Compliance and Privacy Risks Protect and Govern Sensitive Data Protect and Govern Sensitive Data Secure Multi-Cloud Environments Secure Multi-Cloud Environments <p>Sales</p> <ul> <li> <p>Defend Against Threats with SIEM Plus XDR</p> </li> <li> <p>Executive Order 14028 (Zero Trust)</p> </li> <li> <p>Mitigate Compliance and Privacy Risks </p> </li> <li> <p>Protect and Govern Sensitive Data </p> </li> <li> <p>Secure Multi-Cloud Environments </p> </li> </ul> <p>Usage</p> <ul> <li> <p>Defend Against Threats with SIEM Plus XDR - Usage</p> </li> <li> <p>Secure Identities and Access - Usage</p> </li> <li> <p>Mitigate Compliance and Privacy Risks - Usage </p> </li> <li> <p>Protect and Govern Sensitive Data - Usage </p> </li> <li> <p>Secure Multi-Cloud Environments - Usage </p> </li> </ul> <p>Partner Incentives Overview:     https://partner.microsoft.com/en-se/partnership/partner-incentives/</p>"},{"location":"Guides/","title":"Guides","text":""},{"location":"Guides/#interactive-guides","title":"Interactive Guides:","text":"<ul> <li>Defender for Cloud</li> <li>Microsoft Sentinel</li> <li>M365 Defender</li> <li>M365 Defender - Threat Protection</li> <li>MCAS - Detect Threat and manage Alerts</li> <li>MCAS - Discover, protect and control your Apps</li> <li>MDE - Investigate Threats</li> <li>MDE - Investigate and Remediate Threats</li> <li>MDE - Reduce Risk</li> <li>MDE - Threat and Vulnerability Management</li> <li>MDI - Detect Suspicious Activities</li> <li>MDI - Investigate Suspicious Activities</li> <li>MDI - Investigate and Respond to Attacks</li> <li>MDO - Safeguard Email</li> <li>MDO - Enable Protection</li> <li>Purview Insider Risk Management</li> <li>Purview Communications Risk </li> <li>Purview Information Protection</li> <li>Purview Forensic investigation of Security events</li> <li>Purview eDiscovery</li> </ul> <p> (Still working on Tables)## Product Trials:</p> <ul> <li>Microsoft Defender for Identity</li> <li>Microsoft Defender for Office 365 P2</li> <li>Microsoft Defender for Endpoint P2</li> <li>Microsoft 365 E5 Security</li> <li>Microsoft Defender for IoT</li> <li>Microsoft Defender for Cloud Apps</li> <li>Microsoft Defender for Cloud Apps -- App Governance add-on</li> <li>Microsoft Sentinel</li> <li>Microsoft Defender for Office 365</li> <li>Microsoft Sentinel Labs</li> <li>Microsoft Defender for Endpoint P2</li> <li>Microsoft Purview Solutions</li> <li>Microsoft Purview Compliance Manager premium assessments</li> <li>Microsoft 365 E5 Insider Risk Management</li> <li>Microsoft 365 E5 Information Protection &amp; Governance</li> <li>Microsoft 365 E5 Compliance</li> <li>Microsoft Compliance Manager premium assessment</li> <li>Microsoft 365 E5 eDiscovery &amp; Audit</li> <li>Microsoft Priva</li> <li>Microsoft Priva Privacy Risk Management</li> <li>Microsoft Priva Subject Rights Requests</li> </ul>"},{"location":"MDI/","title":"MDI","text":""},{"location":"MDI/#ways-of-working","title":"Ways of working","text":"<p>First decision point - do you have ANY Domain Controllers within your environment? If so then you should install MDI NOW and make it the very top of your Security ToDo list.</p> <p>Example of WHY you do this first:</p> <ul> <li>Small Customer in 2018, back when this was called \"Azure ATP\", installed only as a PoC and in under 48 hours it had identified a mis-configured Server that was exposed to the internet and was being brute-forced via RDP from Eastern Europe.</li> <li>Larger environment 2020, client not sure but was wanting to lock down Legacy Auth, suggested that as they had E5 strong recommendation to deploy MDI ASAP across DC's. After getting CAB Approval to deploy, and with less than 10% coverage of DC's in just over a week it popped up with \"NTDIS Exfil via SMB\"</li> <li>Security Value = Priceless</li> </ul>"},{"location":"MDI/#enable-telemetry","title":"Enable Telemetry","text":"<p>Start here - https://learn.microsoft.com/en-us/defender-for-identity/prerequisites</p> <ol> <li>Capacity planning - https://learn.microsoft.com/en-us/defender-for-identity/capacity-planning</li> <li>Download the Sizing tool - https://github.com/microsoft/ATA-AATP-Sizing-Tool/releases</li> <li>Download the Sensor - https://learn.microsoft.com/en-us/defender-for-identity/download-sensor</li> <li>Install the Sensor on DC's - https://learn.microsoft.com/en-us/defender-for-identity/install-sensor</li> <li>Basic Settings that you should review NOW - https://www.microsoft.com/videoplayer/embed/RWFVEX</li> </ol> <p>This will do for now, especially if you are in a crisis mode, check the console for the DC's being online - now move on to validation below. Please follow up with all other Configuration steps as soon as practible, especially if you also have ADFS in play.  For ADFS please also check - https://learn.microsoft.com/en-us/defender-for-identity/active-directory-federation-services</p>"},{"location":"MDI/#validate-and-test","title":"Validate and Test","text":"<p>Be conscious that if you are testing that MDI is working correctly that this may trigger high impact Alerts to your Blue Team or existing SecOps IF it's already installed and being monitored - or for that matter if another tooling is in place to monitor the same behaviour - so if doing some major testing it's worthwhile letting them know before hand? And on that, make sure you schedule some time to review afterwards about what testing/alerting was created &amp; what was visible from a SecOps perspective? </p> <p>This would be valuable lessons on effectiveness - even more so if there is missing alerts?? :( </p> <ul> <li>Specific Validation information - https://learn.microsoft.com/en-us/defender-for-identity/configure-sensor-settings#validate-installations</li> <li>Make sure that Advanced Settings has Integration enabled - https://learn.microsoft.com/en-us/defender-for-identity/classic-integrate-mde</li> <li>Make doubly sure this Integration is enabled between ALL elements of MDI, MDE, MDO, MDCA and the M365 Defender Console </li> <li>Use Attack Simulations to validate MDI is installed correctly and Alerts are being surfaced accurately:     https://learn.microsoft.com/en-us/defender-for-identity/playbooks</li> <li>Use Labs for in depth checking: https://learn.microsoft.com/en-us/defender-for-identity/playbook-lab-overview</li> <li>https://learn.microsoft.com/en-us/defender-for-identity/playbook-domain-dominance</li> <li>Go to https://portal.atp.azure.com and if you see this, it's not been installed correctly </li> </ul>"},{"location":"MDI/#enable-reporting","title":"Enable Reporting","text":"<p>Once enabled you should now have a lot more visibility into the Security Posture of the onPrem environment - including the following:</p> <ul> <li>Domain controllers with Print Spooler service available</li> <li>Dormant entities in sensitive groups</li> <li>Entities exposing credentials in clear text</li> <li>Microsoft LAPS usage</li> <li>Legacy protocols usage</li> <li>Riskiest lateral movement paths (LMP)</li> <li>Unmonitored domain controllers</li> <li>Unsecure account attributes</li> <li>Unsecure domain configurations</li> <li>Unsecure Kerberos delegation</li> <li>Unsecure SID History attributes</li> <li>Weak cipher usage</li> </ul> <p>More details can be found here &amp; example below - https://learn.microsoft.com/en-us/defender-for-identity/security-assessment#assessment-reports </p>"},{"location":"MDI/#review-and-improve-as-needed","title":"Review and Improve as needed","text":"<ul> <li>Review Security Assessments to validate what potentially needs remediation: https://learn.microsoft.com/en-us/defender-for-identity/security-assessment#assessment-reports</li> <li>Full list of the 44 Alerts that are being checked on your behalf when fully deployed: https://learn.microsoft.com/en-us/defender-for-identity/alerts-overview</li> <li>If you do not use the default Administrator account (ideally have it disabled?) then please add it to the Honeytoken account list: https://learn.microsoft.com/en-us/defender-for-identity/entity-tags#honeytoken-tags</li> <li>Audit checking via Sentinel for MDI - https://thalpius.com/2022/12/14/microsoft-defender-for-identity-auditing-checker-using-sentinel</li> </ul>"},{"location":"MDI/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>https://learn.microsoft.com/en-us/defender-for-identity/troubleshooting-known-issues</li> <li>https://learn.microsoft.com/en-us/defender-for-identity/troubleshooting-using-logs</li> </ul>"}]}